!function(a){var b=a.fn.remove;a.fn.remove=function(c,d){return this.each(function(){return d||(!c||a.filter(c,[this]).length)&&a("*",this).add(this).each(function(){a(this).triggerHandler("remove")}),b.call(a(this),c,d)})},a.widget=function(b,c,d){var e,f=b.split(".")[0];b=b.split(".")[1],e=f+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e]=function(c){return!!a.data(c,b)},a[f]=a[f]||{},a[f][b]=function(a,b){arguments.length&&this._createWidget(a,b)};var g=new c;g.options=a.extend({},g.options),a[f][b].prototype=a.extend(!0,g,{namespace:f,widgetName:b,widgetEventPrefix:a[f][b].prototype.widgetEventPrefix||b,widgetBaseClass:e},d),a.widget.bridge(b,a[f][b])},a.widget.bridge=function(b,c){a.fn[b]=function(d){var e="string"==typeof d,f=Array.prototype.slice.call(arguments,1),g=this;return d=!e&&f.length?a.extend.apply(null,[!0,d].concat(f)):d,e&&"_"===d.substring(0,1)?g:(this.each(e?function(){var c=a.data(this,b),e=c&&a.isFunction(c[d])?c[d].apply(c,f):c;return e!==c&&void 0!==e?(g=e,!1):void 0}:function(){var e=a.data(this,b);e?(d&&e.option(d),e._init()):a.data(this,b,new c(d,this))}),g)}},a.Widget=function(a,b){arguments.length&&this._createWidget(a,b)},a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(b,c){this.element=a(c).data(this.widgetName,this),this.options=a.extend(!0,{},this.options,a.metadata&&a.metadata.get(c)[this.widgetName],b);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()}),this._create(),this._init()},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(b,c){var d=b,e=this;if(0===arguments.length)return a.extend({},e.options);if("string"==typeof b){if(void 0===c)return this.options[b];d={},d[b]=c}return a.each(d,function(a,b){e._setOption(a,b)}),e},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",b),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(b,c,d){var e=this.options[b];if(c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),d=d||{},c.originalEvent)for(var f,g=a.event.props.length;g;)f=a.event.props[--g],c[f]=c.originalEvent[f];return this.element.trigger(c,d),!(a.isFunction(e)&&e.call(this.element[0],c,d)===!1||c.isDefaultPrevented())}}}(jQuery);var MO_SIDE_MENU_MODULE=function(){function a(){return k}function b(a){k=a}function c(a,b){var c={displayLang:$("meta[name=language]").attr("content"),do_follow:!0,menu_sel:".menu-item",icon_sel:".menu-item > .icon",flyout_sel:".flyout",flyout_header_sel:".flyout-title",flyout_open_class:"open",flyout_content:".menu-content",is_lesson_page:!1,mtc_email_block:".mtcEmail"};j=$.extend({},c,b);var d=window.matchMedia("(min-width: 500px)");j.is_lesson_page&&f(a,j),$(j.icon_sel).click(function(){var b=$(this).parent(j.menu_sel).find(j.flyout_sel);b.hasClass(j.flyout_open_class)?h():a.find(j.flyout_sel+"."+j.flyout_open_class).length?h(function(){e(b)}):e(b)}),$(j.flyout_header_sel).click(function(){h()}),(d.matches||MO_IS_OLD_IE)&&j.do_follow&&i(a,j);var g=$(j.mtc_email_block);if(g.length){var k=encodeURIComponent(window.location.href),l=document.createElement("iframe"),m=encodeURIComponent(g.data("privacy-policy-url")),n="http://rcweb.globalmtc.org/widget/Default/mo?src="+k+"&lang="+j.displayLang+"&policyUrl="+m;$(l).attr({id:"mtcEmailIframe",src:n,marginheight:"0",marginwidth:"0",frameborder:"0"}),g.replaceWith(l),$(window).on("message",function(a){var b=a.originalEvent.origin,c=-1!==b.indexOf("rcweb.globalmtc.org");c&&("success"===a.originalEvent.data.toLowerCase()?setTimeout(h,4e3):h())})}}function d(){document.body.addEventListener("click",g,!1)}function e(a){a.addClass(j.flyout_open_class),a.show(400,d)}function f(a,b){var c,d,e,f=$("#lesson-title").text();a.find(".menu-item-lesson").parent().find(b.flyout_header_sel).text(f),$("#content .lesson-section").each(function(){e="#"+$(this).attr("id"),d=$(this).find(".lesson-section-heading").text(),c=a.find(".clone").clone().removeClass("clone hidden"),c.attr("data-section-id",e).find(".menu-content-list-item-link").attr("href",e).text(d),a.find(".menu-content-list").append(c)}),a.find(".clone").remove(),$.momlMenuScroll({callback:h})}function g(a){0===$(a.target).closest(j.flyout_content).closest(j.flyout_sel+"."+j.flyout_open_class).length&&h()}function h(a){var b=$(j.flyout_sel+"."+j.flyout_open_class);document.body.removeEventListener("click",g,!1),b.removeClass(j.flyout_open_class),b.hide(400,a)}function i(a,b){var c={scroll_y:117,default_y:0,top:40},d=$.extend({},c,b),e=function(){a.css($(this).scrollTop()>d.scroll_y?{position:"fixed",top:d.top,"z-index":"20"}:{position:"absolute",top:d.default_y,"z-index":"21"})};e(),$(window).scroll(e)}var j,k=!1;return{init:c,closeMenu:h,isSubmitting:a,setSubmitting:b}}();angular.module("FormSubmissionApp",["ngSanitize","rcForm"]).controller("FormSubmissionController",["$scope","$http",function(a,b){var c,d;a.chat={},a.submitChatRequest=function(){var b,c,d=Math.round((new Date).getTime())+""+Math.floor(1e4*Math.random()),e=$("#side-menu [data-chatCode]").attr("data-chatCode"),f="No Email Provided.";MTC.startChat(e,a.chat.first_name,f,d,b,c),s.linkTrackVars+="event2",s.events="event2",s.transactionID=d,s.prop16=d,s.eVar12=d,s.pageName="Mormon.org: Chat Initiated",s.t(),MO_SIDE_MENU_MODULE.closeMenu()},c=function(){a.showReferMe?(s.events="event1",s.pageName="Mormon.org: Request Missionary Visit Referral"):(s.events="event5",s.pageName="Mormon.org: Request Missionary Visit Referral"),s.t(),a.isSubmittedMissionary=!0,a.isSubmittingMissionary=!1,MO_SIDE_MENU_MODULE.setSubmitting(!1)},a.referral={},a.showReferMe=!0,a.showReferFriend=!1,a.isSubmittingMissionary=!1,a.isSubmittedMissionary=!1,a.updateMissionarySubregions=function(){b.get("/ws/subRegions?c="+a.referral.referral_country).success(function(b){a.missionarySubregions=b.locations.location})},a.submitMissionaryRequest=function(){var d;MO_SIDE_MENU_MODULE.isSubmitting()||(MO_SIDE_MENU_MODULE.setSubmitting(!0),a.isSubmittingMissionary=!0,d={first:a.referral.referral_first_name,last:a.referral.referral_last_name,address:a.referral.referral_address,city:a.referral.referral_city,country:a.referral.referral_country,state:a.referral.referral_subregion.officialName,zip:a.referral.referral_zip,phone:a.referral.referral_phone,email:a.referral.referral_emailAddress,emailVerify:a.referral.referral_emailAddressVerify,comments:a.referral.comments,referring_fName:a.showReferFriend?a.referral.referring_first_name:"",referring_lName:a.showReferFriend?a.referral.referring_last_name:"",referring_phone:a.showReferFriend?a.referral.referring_phone:"",referring_email:a.showReferFriend?a.referral.referring_emailAddress:""},b.post("/ws/contact",d).success(c).error(c))},a.referMe=function(){a.showReferMe=!0,a.showReferFriend=!1},a.referFriend=function(){a.showReferMe=!1,a.showReferFriend=!0},d=function(){a.showReferMe?(s.pageName="Mormon.org: Free Book of Mormon Referral",s.events="event3"):(s.pageName="Mormon.org: Free Bible Referral",s.events="event6"),s.t(),a.orderBom?a.isSubmittedBom=!0:a.isSubmittedBible=!0,a.isSubmittingScriptures=!1,MO_SIDE_MENU_MODULE.setSubmitting(!1)},a.scriptureReferral={},a.orderBom=!0,a.orderBible=!1,a.isSubmittingScriptures=!1,a.isSubmittedBom=!1,a.isSubmittedBible=!1,a.offerCode="1",a.updateScriptureSubregions=function(){b.get("/ws/subRegions?c="+a.scriptureReferral.referral_country).success(function(b){a.scriptureSubregions=b.locations.location})},a.submitScriptureRequest=function(){var c;MO_SIDE_MENU_MODULE.isSubmitting()||(MO_SIDE_MENU_MODULE.setSubmitting(!0),a.isSubmittingScriptures=!0,c={first:a.scriptureReferral.referral_first_name,last:a.scriptureReferral.referral_last_name,address:a.scriptureReferral.referral_address,city:a.scriptureReferral.referral_city,country:a.scriptureReferral.referral_country,state:a.scriptureReferral.referral_subregion.officialName,zip:a.scriptureReferral.referral_zip,phone:a.scriptureReferral.referral_phone,email:a.scriptureReferral.referral_emailAddress,emailVerify:a.scriptureReferral.referral_emailAddressVerify,comments:a.scriptureReferral.comments,offer_code:a.offerCode},b.post("/ws/contact",c).success(d).error(d))},a.bomClick=function(){a.orderBom=!a.orderBom,a.orderBom?a.offerCode="1":a.orderBible&&(a.offerCode="2")},a.bibleClick=function(){a.orderBible=!a.orderBible,a.orderBible&&!a.orderBom&&(a.offerCode="2")}}]),angular.element(document).ready(function(){angular.bootstrap(document.getElementById("side-menu"),["FormSubmissionApp"])});var MO_MEET_MORMON_MODULE=function(){function a(){$(".meet_mormon_header").click(function(){var a=$(this).next(".meet_mormon_content"),b=a.hasClass("open");b?a.slideToggle().removeClass("open"):($(".meet_mormon_content.open").slideToggle().removeClass("open"),a.slideToggle().addClass("open"))}),$("#people-find-form").submit(function(){$("#search_name_keyword").val()==$("#search_name_keyword").attr("placeholder")&&$("#search_name_keyword").val("")}),$("#church-find-form").submit(function(){return $(".enter-search-church").each(function(){$(this).val()==$(this).attr("placeholder")&&$(this).val("")}),window.location=$("#church-find-form").attr("rel")+"?search="+$("#find_church_search").val(),!1})}return{init:a}}();!function(a){"use strict";a.widget("lds.lazyLoad",{options:{lazyClass:"lazy",doneClass:"lazyLoadDone",placeholder:"//edge.ldscdn.org/images/1x1.gif",updateOnResize:!0,attList:["src","width","height","alt","class"],threshold:300,timer:1e3,useTimer:!1,resizeDelay:100,fadeSpeed:500,loadHidden:!1,mustForce:!1,srcs:["2x","desktop","mobile"],srcFallback:"desktop",tests:{"2x":function(){return window.devicePixelRatio>1},mobile:function(){return a(window).width()<600},desktop:function(){return a(window).width()>600}}},_create:function(){var b,c,d=this.options,e=this,f=e.element,g=e.widgetName,h=d.doneClass,i=d.images||"img."+d.lazyClass;e.imageSelector=i,d.loadHidden||(e.imageSelector=i+":visible"),b=e.imageSelector,a(f).delegate(i,"update."+g,function(b,d){a(this).hasClass(h)?(c=e.getSrc(a(this)),e.setSrc(a(this),c,d)):e.checkLocation(this,d)}).delegate(i,"loadNow."+g,function(){e.loadNow(this)}),a(i,f).css("opacity","0.01"),a(window).add(d.secondaryScroll).bind("scroll."+g+" resize."+g+" orientationchange."+g,function(){clearTimeout(e.scrollTimer),e.scrollTimer=setTimeout(function(){var c=a(b);d.updateOnResize||(c=c.not("."+h)),e.viewportHeight=a(window).height(),e.viewportTopY=a(window).scrollTop(),e.viewportWidth=a(window).width(),e.viewportLeftX=a(window).scrollLeft(),c.trigger("update."+g,!1)},e.initialized?d.resizeDelay:0)}),d.timer&&d.useTimer&&(e.loadEm=setInterval(function(){var c=a(b).not("."+h).eq(0);c.trigger("update."+g,!0),a(b).not("."+h).length||clearInterval(e.loadEm)},d.timer)),d.loadAll&&a(b).trigger("update."+g,!0),e.initialized=!0},_init:function(){var b=this,c=b.element,d=b.widgetName;b.noscript(),a(b.imageSelector,c).not("."+b.options.doneClass).each(function(){var c=b.getSrc(a(this));sessionStorage.getItem(c)?a(this).trigger("update."+d,!0):a(this).trigger("update."+d,!1)}),a(window).trigger("resize."+d)},checkLocation:function(b,c){var d,e=this.options,f=this,g=/iphone|ipod/i.test(navigator.userAgent.toLowerCase())?60:0,h=a(b);((!h.hasClass(e.doneClass)||e.updateOnResize)&&(e.loadHidden||!e.loadHidden&&h.is(":visible"))&&h.offset().top<f.viewportTopY+f.viewportHeight+e.threshold+g&&h.offset().left<f.viewportLeftX+f.viewportWidth+e.threshold+g&&!e.mustForce&&!h.data("mustforce")||c)&&(d=f.getSrc(h),f.setSrc(h,d,c),e.minHeight&&!h.data("height")&&h.attr("height",""),h.addClass(e.doneClass))},getSrc:function(b){var c,d,e=this.options;return a.each(e.srcs,function(a,f){return d="function"==typeof e.tests[f]?e.tests[f].call():e.tests[f],b.data(f)&&e.tests[f].call()?(c=b.data(f),!1):void 0}),c||(c=b.data(e.srcFallback)),c},setSrc:function(a,b,c){var d=this.options,e=this;b&&b!==a.attr("src")&&(a.attr("src",b).fadeTo(c?0:d.fadeSpeed,1),a.data("width")||a.removeAttr("width"),a.data("height")||a.removeAttr("height"),sessionStorage.setItem(b,"loaded"),a.off("load.lazyLoad").on("load.lazyLoad",function(){e._trigger("onload",!1,a)}))},noscript:function(){var b=this,c=b.options,d=b.element,e=c.noscript||"noscript."+c.lazyClass;a(e,d).each(function(){var b=a(this),d=a("<img>");a.each(c.attList,function(a,c){b.data(c)&&d.attr(c,b.data(c)||"")}),a.each(b.data(),function(a,b){d.data(a,b)}),d.addClass(c.lazyClass).attr("src",c.placeholder),!d.attr("height")&&c.minHeight&&d.attr("height",c.minHeight),a(this).before(d),b.remove()})},loadNow:function(a){this.checkLocation(a,!0)},destroy:function(){a.Widget.prototype.destroy.apply(this,arguments),a(this.element).add(window).unbind("."+this.widgetName)}}),a.extend(a.lds.lazyLoad,{version:"1.3.0"})}(jQuery),$(function(){$("body").lazyLoad(),MO_SIDE_MENU_MODULE.init($("#side-menu")),MO_MEET_MORMON_MODULE.init()});